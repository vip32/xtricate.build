{"name":"Xtricate.build","body":"xtricate.build   \r\n==============\r\n  \r\nxtricate.build is a psake build and deployment extension. \r\n\r\n### some of the features \r\n* environment management: control your environment and everything depending on it.\r\n* local and remote deployments: one way to deploy them all\r\n* output packaging: keep everything deployable in one place\r\n* configuration and script templating: the model knows everything, use it\r\n* tag based model execution: only install what you want or need\r\n* non obtrusive: no modifications to your projects needed\r\n* extensibility: change the model dsl with your own items\r\n* environment smoke testing: is your environment working?\r\n* html and diagram documentation: get an overview of your project and environment\r\n* nuget package management: consume and publish packages with nuget\r\n\r\n### how can i use xtricate.build in my projects?\r\n* copy the `.\\build` folder to the root of your branch, rename if you like. \r\n* create a `.\\build\\default.ps1` specific for your projects (psake), modify the properties and tasks if needed.\r\n* create a `.\\build\\default.model.psm1` specific for your environment (model), start with a 'local' environment.\r\n* run `psake.cmd taskname(s)` from the `.\\build` folder with the appropriate task(s).\r\n\r\n## demonstration\r\n`.\\src\\demo*` contains a buildable and deployable .net 4 solution using these xtricate.build extensions. \r\n\r\n    .\\build\r\n\t\t\\assets\t\t\t\t\t\t[demo project assets like certificates]\r\n\t\t\\modules\t\t\t\t\t[xtricate.build psake modules]\r\n\t\t\\output\t\t\t\t\t\t\r\n\t\t\t\\default.master\t\t\t[demo project output packages appear here]\r\n\t\t\\tools\t\t\t\t\t\t[xtricate.build tools like nunit and nuget]\r\n\t\tdefault.ps1\t\t\t\t\t[demo project psake file, the tasks]\r\n\t\tdefault.model.psm1\t\t\t[demo project model file, the environments]\r\n\t.\\lib\t\t\t\t\t\t\t[demo project external libraries appear here]\r\n    .\\src\t\t\t\t\t\t\t[demo project solution]\r\n\t\t\\demo\r\n\t\t...\r\n\t\t\\demo.webservices\r\n\r\n## basic usage examples\r\nrun the following commands from the `.\\build` folder\r\n\r\n> .\\psake.cmd package\r\n\r\ninitiates the creation of the output packages, does a complete build and places the packages in the `.\\output` folder.\r\n\r\n> .\\psake.cmd templatelocal\r\n\r\nexpands all templates (.template) in the sources folder for the local environment.\r\n   \r\n> .\\psake.cmd packageinstall \r\n\r\ninitiates the creation of the output packages and installs them on the current node, does a complete build\r\n\r\n> .\\psake.cmd remotepackageinstall -environment test -nodes nodeX -tags all\r\n\r\ninstalls the packages matching the tags on the remote node. before installing all templates are expanded for the specified environment.\r\n\r\n## model introduction\r\nxtricate.build relies heavily on an environment model (the model), like a dsl, which contains all the environments important for the project. \r\nexamples of environments are : the local development workstation, a test or production environment. xtricate.build can manage the deployment of your project\r\nfor all these environments. the model file to use is specified within the properties of the psake buildfile.\r\n\t\r\n\tproperties{\r\n\t\t...\r\n\t\t$modelfile=resolvedefaultmodel\r\n\t\t...\r\n\t}\r\n\r\nthe defaultmodel function resolves to `default.model.psm1` if the psake buildfile used is named `default.ps1`.\r\nan environment consists of nodes (e.g. computers, load balancers). each node has resources and packages assigned to it\r\n* a resource is something that will be there or must be created (e.g. accounts, apppools, websites, certificates).\r\n* a package is something that is created by your project, for example : webapplication, folders, webservices, console apps, scheduled tasks, windows services\r\n\r\n### the environment model dsl :\r\n    configuration\r\n        settings\r\n            environment -id 'local' -name\r\n                settings\r\n                node 'localhost' -id -name\r\n                    resources -id -name -skipinstall -skipuninstall -tags\r\n                    packages -id -name -skipinstall -skipuninstall -tags\r\n            environment -id 'test' -name\r\n                settings\r\n                node -id 'webserver' -name\r\n                    resources\r\n                    packages\r\n                node -id 'dbserver' -name\r\n                    resources\r\n            \t\tpackage\r\n\t\t\t\t\t\r\n### the basic node resources `.\\modules\\xtricate.build.model.nodes.resouces.psm1`\r\n* remoting: configure the remote session for this node, used during remote installation\r\n* certificate\r\n* apppool\r\n* localidentity\r\n* website\r\n* hostsfile \r\n\r\n### the basic node packages `.\\modules\\xtricate.build.model.nodes.packages.psm1`\r\n* genericpackage\r\n* webapppackage\r\n* databasepackage\r\n* systemtestpackage\r\n\r\n### solution packages\r\npackages in the model most often represent a project you are working on, to couple the model to a project location a 'solution.package.psm1' file is placed in the project folder. \r\nthis file contains the id of the package in the model. \r\n\r\n\tsolutionpackage \"demo.webapp\" \r\n\r\nan alternative way to do the project coupling is by modifying the 'loadmodel' functions in the 'model' and 'modellocal' tasks. in this way no 'solution.package.psm1' has to be placed in the project folder. \r\n\r\n\tloadmodel `\r\n\t\t-modelfile $modelfile `\r\n\t\t-environment $environment `\r\n\t\t-packagesPath $sources_dir `\r\n\t\t-solutionpackages {\r\n\t\t\tsolutionpackage -packageid \"demo.webservices\" -name \"demo.webservices\" -location \"$($sources_dir)\\demo.webservices\"\r\n\t\t}\r\n\r\n## template expansion\r\nthe model serves as the basis for all kind of templating. templates are files which contain template functions and are expanded by executing the `template` or `templatelocal`\r\ntasks. \r\ntemplate expansion is not done on build or package time, the output folder with its packages does not contain expanded templates for each environment.\r\nfor examples: the various install tasks depend on the template tasks, so template expansion is executed when needed.  \r\nall files ending with `.template` are expanded to files without this suffix. a web.config.template becomes a regular web.config this way.\r\n\r\n### the basic template functions `.\\modules\\xtricate.build.template.functions.psm1`\r\nall template functions are used like `[[templatefunction -params]]` in the template, regular powershell scripting is allowed too.\r\n\r\n* getsetting\r\n* getenvironment\r\n* getnoderesource\r\n* getnoderesources\r\n* getnoderesourcepath\r\n* getnodepackage\r\n* getnodepackagepath\r\n* getnodepackagename\r\n* getnodepackageurl\r\n\r\n### template examples\r\n\r\n> connectionString=\"data source=[[fullpath (getnodepackagepath demo.db)]]\\[[getnodepackagename demo.db]]\"\r\n\r\n\r\n> compilation debug=\"[[getsetting 'debug']]\" targetFramework=\"4.0\"\r\n\r\n## local and remote project installation\r\n\r\nthe contents of the `.\\build` folder contains everything needed for deployment on any node within an environment. \r\nstarting with the following command to create the output packages :\r\n\r\n> .\\psake.cmd package\r\n\r\nthen manually copying the build folder to a node and executing :\r\n\r\n> .\\psake.cmd install\r\n\r\nwill install, according to the environment model, all applicable resources and packages on that node. \r\n\r\nor, let xtricate.build handle everything. building, copying and installation on a node can be done like this :\r\n\r\n> .\\psake.cmd remotepackageinstall -environment test -nodes dev-srv-1\r\n\r\n## advanced usage examples\r\nrun the following commands from the `.\\build` folder\r\n\r\n> .\\psake.cmd spectest -environment test -tags all\r\n\r\nruns all spectest systemtestpackages within the `.\\output` folder. the configuration templates are expanded for the specified environment, systemtests can be run anywhere.\r\n\r\n## the demo solution uses the following tools and technologies :\r\n* microsoft visual studio 2010\r\n* microsoft asp.net mvc 3\r\n* microsoft sql ce 4.0\r\n* specflow 1.5\r\n* watin 2.0\r\n* nunit 2.5.7\r\n* entityframework 4.1\r\n* iis7 (webadministration module)\r\n* **[nuget](http://nuget.org/List/Packages/xtricate.build)**\r\n\r\n### some modules are based on work by:\r\n* **[chewie](https://github.com/Ang3lFir3/Chewie)** : nuget package management\r\n* **[soever](http://weblogs.asp.net/soever/archive/2006/12/31/a-templating-engine-using-powershell-expressions.aspx)** : powershell template engine\r\n* **[poshcode.org](http://poshcode.org)** : various powershell scripts\r\n\r\nxtricate.build contains a modified version of **[psake](http://github.com/JamesKovacs/psake)** by James Kovacs. some small\r\nimprovements in module loading were made.","tagline":"xtricate.build is a psake build and deployment extension","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}